/*!
 * jQuery SmartCart v3.0.1
 * The awesome jQuery Shopping Cart Plugin with PayPal payment support
 * http://www.techlaboratory.net/smartcart
 *
 * Created by Dipu Raj
 * http://dipuraj.me
 *
 * Licensed under the terms of the MIT License
 * https://github.com/techlab/SmartCart/blob/master/LICENSE
 */
!function(t,e,a,i){"use strict";function s(e,a){this.options=t.extend(!0,{},n,a),this.cart=[],this.cart_element=t(e),this.cart_list_element=null,this.init()}var n={cart:[],resultName:"cart_list",theme:"default",combineProducts:!0,highlightEffect:!0,cartItemTemplate:'<img class="img-responsive pull-left" src="{product_image}" /><h4 class="list-group-item-heading">{product_name}</h4><p class="list-group-item-text">{product_desc}</p>',cartItemQtyTemplate:"{display_price} × {display_quantity} = {display_amount}",productContainerSelector:".sc-product-item",productElementSelector:"*",addCartSelector:".sc-add-to-cart",lang:{checkout:"Checkout",clear:"Clear",subtotal:"Subtotal:",cartRemove:"×"},submitType:"form",ajaxURL:"",toolbarSettings:{showCheckoutButton:!0,showClearButton:!0,checkoutButtonStyle:"default",toolbarPosition:"bottom",toolbarButtonPosition:"right",toolbarExtraButtons:[]},cartDeleteAnimation:"",debug:!0};t.extend(s.prototype,{init:function(){this._setElements(),this._setToolbar(),this._setEvents(),this._hasCartChange()},_setElements:function(){this.cart_list_element=t('<input type="hidden" name="'+this.options.resultName+'" id="'+this.options.resultName+'" />'),this.cart_element.append(this.cart_list_element),this.cart_element.addClass("panel panel-default sc-cart sc-theme-"+this.options.theme),this.cart_element.append('<div class="panel-heading sc-cart-heading">Shopping Cart <span class="sc-cart-count badge">0</span></div>'),this.cart_element.append('<div class="list-group sc-cart-item-list"></div>')},_setToolbar:function(){var e=t("<div></div>").addClass("panel-footer"),a="";switch(this.options.toolbarSettings.checkoutButtonStyle){case"paypal":a='<button class="sc-button-checkout-paypal sc-cart-checkout" type="submit"><img src="https://www.paypalobjects.com/webstatic/en_US/i/buttons/checkout-logo-medium.png" alt="Check out with PayPal" /></button>';break;default:a='<button class="btn btn-info sc-cart-checkout" type="button">'+this.options.lang.checkout+"</button> "}e.append('<div class="sc-cart-summary">'+this.options.lang.subtotal+' <span class="sc-cart-subtotal">0</span></div>'),e.append('<div class="sc-cart-toolbar">'+a+' <button class="btn btn-danger sc-cart-clear" type="button">'+this.options.lang.clear+"</button></div>"),this.cart_element.append(e)},_setEvents:function(){var e=this;t(this.options.addCartSelector).on("click",function(a){a.preventDefault();var i=e._getProductDetails(t(this));i=e._addToCart(i),t(this).parents(e.options.productContainerSelector).addClass("sc-added-item").attr("data-product-unique-key",i.unique_key)}),t(this.cart_element).on("click",".sc-cart-remove",function(a){a.preventDefault(),t(this).parents(".sc-cart-item").fadeOut("normal",function(){e._removeFromCart(t(this).data("unique-key")),t(this).remove(),e._hasCartChange()})}),t(this.cart_element).on("change",".sc-cart-item-qty",function(a){a.preventDefault(),e._updateCartQuantity(t(this).parents(".sc-cart-item").data("unique-key"),t(this).val())}),t(this.cart_element).on("click",".sc-cart-checkout",function(t){t.preventDefault(),e._submitCart()}),t(this.cart_element).on("click",".sc-cart-clear",function(a){a.preventDefault(),t(".sc-cart-item-list > .sc-cart-item",this.cart_element).fadeOut("normal",function(){t(this).remove(),e._clearCart(),e._hasCartChange()})})},_getProductDetails:function(e){var a=this,i={};return e.parents(this.options.productContainerSelector).find(this.options.productElementSelector).each(function(){if(t(this).is("[name]")===!0||void 0!==t(this).data("name")){var e=t(this).attr("name")?t(this).attr("name"):t(this).data("name"),s=a._getContent(t(this));e&&s&&(i[e]=s)}}),i},_addToCart:function(e){var a=this;if(!e.hasOwnProperty("product_price"))return this._logMessage("Price is not set for the item"),!1;if(e.hasOwnProperty("unique_key")||(e.unique_key=this._getUniqueKey()),e.hasOwnProperty("product_quantity")||(e.product_quantity=1),this.options.combineProducts){var i=t.grep(this.cart,function(t,i){return a._isObjectsEqual(t,e)});if(i.length>0){var s=this.cart.indexOf(i[0]);this.cart[s].product_quantity=this.cart[s].product_quantity-0+(e.product_quantity-0),e=this.cart[s],this._triggerEvent("itemUpdated",[e])}else this.cart.push(e),this._triggerEvent("itemAdded",[e])}else this.cart.push(e),this._triggerEvent("itemAdded",[e]);return this._addUpdateCartItem(e),e},_removeFromCart:function(e){var a=this;t.each(this.cart,function(i,s){if(s.unique_key===e){var n=a.cart[i];return a.cart.splice(i,1),t('*[data-product-unique-key="'+e+'"]').removeClass("sc-added-item"),a._hasCartChange(),this._triggerEvent("itemRemoved",[n]),!1}})},_clearCart:function(){this.cart=[],this._triggerEvent("cartCleared"),this._hasCartChange()},_updateCartQuantity:function(e,a){var i=this,s=this._getValidateNumber(a);t.each(this.cart,function(t,n){if(n.unique_key===e)return s&&(i.cart[t].product_quantity=a),i._addUpdateCartItem(i.cart[t]),this._triggerEvent("quantityUpdate",[i.cart[t],a]),!1})},_addUpdateCartItem:function(e){var a=(e.product_quantity-0)*(e.product_price-0),i=t(".sc-cart-item-list",this.cart_element),s=i.find("[data-unique-key='"+e.unique_key+"']");if(s&&s.length>0)s.find(".sc-cart-item-qty").val(e.product_quantity),s.find(".sc-cart-item-amount").text(this._getMoneyFormatted(a));else{s=t("<div></div>").addClass("sc-cart-item list-group-item"),s.append('<button type="button" class="sc-cart-remove">'+this.options.lang.cartRemove+"</button>"),s.attr("data-unique-key",e.unique_key),s.append(this._formatTemplate(this.options.cartItemTemplate,e));var n='<div class="sc-cart-item-summary"><span class="sc-cart-item-price">'+this._getMoneyFormatted(e.product_price)+"</span>";n+=' × <input type="number" min="1" max="1000" class="sc-cart-item-qty" value="'+this._getValueOrEmpty(e.product_quantity)+'" />',n+=' = <span class="sc-cart-item-amount">'+this._getMoneyFormatted(a)+"</span></div>",s.append(n),i.append(s)}this.options.highlightEffect===!0&&(s.addClass("sc-highlight"),setTimeout(function(){s.removeClass("sc-highlight")},500)),this._hasCartChange()},_hasCartChange:function(){t(".sc-cart-count",this.cart_element).text(this.cart.length),t(".sc-cart-subtotal",this.element).text(""+this._getCartSubtotal()),0===this.cart.length?(t(".sc-cart-item-list",this.cart_element).empty().append(t('<div class="sc-cart-empty-msg">Cart is Empty!<br />Choose your products</div>')),t(this.options.productContainerSelector).removeClass("sc-added-item"),this._triggerEvent("cartEmpty")):t(".sc-cart-item-list > .sc-cart-empty-msg",this.cart_element).remove(),t("#"+this.options.resultName,this.cart_element).val(JSON.stringify(this.cart))},_getCartSubtotal:function(){var e=this,a=0;return t.each(this.cart,function(t,i){e._getValidateNumber(i.product_price)&&(a+=(i.product_price-0)*(i.product_quantity-0))}),this._getMoneyFormatted(a)},_submitCart:function(){var e=this,a=this.cart_element.parents("form");return"ajax"===this.options.submitType||("paypal"===this.options.submitType?a.length>0?(a.children(".sc-paypal-input").remove(),t.each(this.cart,function(t,i){var s=t+1;a.append('<input class="sc-paypal-input" name="item_number_'+s+'" value="'+e._getValueOrEmpty(i.product_id)+'" type="hidden">').append('<input class="sc-paypal-input" name="item_name_'+s+'" value="'+e._getValueOrEmpty(i.product_name)+'" type="hidden">').append('<input class="sc-paypal-input" name="amount_'+s+'" value="'+e._getValueOrEmpty(i.product_price)+'" type="hidden">').append('<input class="sc-paypal-input" name="quantity_'+s+'" value="'+e._getValueOrEmpty(i.product_quantity)+'" type="hidden">')}),a.submit()):this._logMessage("Form not found to submit to paypal"):a.length>0?a.submit():this._logMessage("Form not found to submit")),!0},_getContent:function(t){return t.is(":checkbox, :radio")?t.is(":checked")?t.val():"":t.is("[value], select")?t.val():t.is("img")?t.attr("src"):t.text()},_isObjectsEqual:function(t,e){if(Object.getOwnPropertyNames(t).length!==Object.getOwnPropertyNames(e).length)return!1;for(var a in t)if("unique_key"!==a&&"product_quantity"!==a&&(void 0!==t[a]||void 0!==e[a])&&t[a]!==e[a])return!1;return!0},_getMoneyFormatted:function(t){return t-=0,Number(t.toFixed(2)).toLocaleString("en-US",{style:"currency",currency:"USD",currencyDisplay:"symbol"})},_getValueOrEmpty:function(t){return t&&void 0!==t?t:""},_getValidateNumber:function(t){return!!((t-=0)&&t>0)},_formatTemplate:function(t,e){for(var a=t.split("{"),i="",s=0;s<a.length;s++){var n=a[s].substring(0,a[s].indexOf("}"));i+=n.length>0?a[s].replace(n+"}",this._getValueOrEmpty(e[n])):a[s]}return i},_triggerEvent:function(e,a){var i=t.Event(e);return this.cart_element.trigger(i,a),!i.isDefaultPrevented()&&i.result},_getUniqueKey:function(){return(new Date).getTime()},_logMessage:function(e){if(this.options.debug!==!0)return!1;t.error(e)},theme:function(t){if(this.options.theme===t)return!1;this.cart_element.removeClass("sw-theme-"+this.options.theme),this.options.theme=t,this.cart_element.addClass("sw-theme-"+this.options.theme),this._triggerEvent("themeChanged",[this.options.theme])},reset:function(){if(this._triggerEvent("beginReset")===!1)return!1;this.container.stop(!0),t(".sw-toolbar",this.cart_element).remove(),this.steps.removeClass(),this.steps.data("has-content",!1),this.init(),this._triggerEvent("endReset")}}),t.fn.smartCart=function(e){var a,i=arguments;return void 0===e||"object"==typeof e?this.each(function(){t.data(this,"smartCart")||t.data(this,"smartCart",new s(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(a=t.data(this[0],"smartCart"),"destroy"===e&&t.data(this,"smartCart",null),a instanceof s&&"function"==typeof a[e]?a[e].apply(a,Array.prototype.slice.call(i,1)):this):void 0}}(jQuery,window,document);